{% extends 'base.html' %}

{% block header %}
    <h1>{% block title %}Comment on Post{% endblock %}</h1>
{% endblock %}

{% block content %}
    <article class="post">
        <header>
            <div>
                <h1>{{ post['title'] }}</h1>
                <div class="about">by {{ post['username'] }} on {{ post['created_time'].strftime('%Y-%m-%d') }}</div>
                <div class="body"> {{post.body}}</div>
            </div>
        </header>

        <h3>Comments</h3>
            <div class="comments-container">
                {% for comment in comments %}
                    <div class="comment-item">
                        <div class="comment-content">
                            <span>{{ comment['content'] }}</span>
                            {% if g.user['id'] == comment['uid'] %}
                                <form class="delete-form" action="{{ url_for('blog.comment_delete', id=comment['id']) }}" method="post">
                                    <button class="delete-btn" type="submit" onclick="return confirm('Are you sure?');">Delete</button>
                                </form>
                            {% endif %}
                        </div>
                        <div class="about">by {{ comment['username'] }} on {{ comment['comment_time'].strftime('%Y-%m-%d') }}</div>
                    </div>
                {% endfor %}
            </div>
    </article>

    <form method="post">

        <label for="content">Comment Content</label>
        <textarea name="content" id="content">{{ request.form['content'] }}</textarea>
        <input type="submit" value="Save">
    </form>

{% endblock %}